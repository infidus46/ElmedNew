<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol" 
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors" 
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
             xmlns:control="clr-namespace:Yamed.Control;assembly=Yamed.Control"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core" 
             x:Class="Yamed.Emr.SluchTemplateD31" Initialized="SluchTemplateD31_OnInitialized"
             control:EnterKeyTraversal.IsEnabled="True"
             mc:Ignorable="d" Loaded="UserControl_Loaded"
             xmlns:local="clr-namespace:Yamed.Emr"
             d:DesignHeight="768" d:DesignWidth="1024">
    <UserControl.Resources>
        <local:RoleVisibility x:Key="roleVisibility" />
        <local:DiagnosColorConverter x:Key="diagnosColorConverter" />
        <local:DiagnosShowConverter x:Key="diagnosShowConverter" />

        <Style x:Key="MyFocusVisual">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Control}">
                        <Grid Margin="3 2">
                            <Rectangle x:Name="r1" StrokeThickness="1" Stroke="Black" StrokeDashArray="2 2"/>
                            <Border x:Name="border" Width="{TemplateBinding ActualWidth}" Height="{TemplateBinding ActualHeight}"  CornerRadius="2" BorderThickness="1" />
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ShadowStyle">
            <Setter Property="Control.Foreground" Value="LightGray" />
        </Style>
        <Style x:Key="InformButton" TargetType="{x:Type Button}">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="FontFamily" Value="Verdana"/>
            <Setter Property="FontSize" Value="11px"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource MyFocusVisual}" />
            <Setter Property="Background" Value="Transparent">
                <!--<Setter.Value>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1" >
                            <GradientStop Color="#FFA6D8F5" Offset="0"/>
                            <GradientStop Color="#FF4B83CB" Offset="0.30"/>
                            <GradientStop Color="#FF02428D" Offset="0.7"/>
                            -->
                <!--<GradientStop Color="#FFA6D8F5" Offset="1"/>-->
                <!--
                        </LinearGradientBrush>
                    </Setter.Value>-->
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="border" BorderThickness="0"	Padding="4,2" 
				            BorderBrush="Transparent" 	CornerRadius="5" 
				            Background="{TemplateBinding Background}">
                            <Grid >
                                <ContentPresenter HorizontalAlignment="Center" 
	                               VerticalAlignment="Center" x:Name="contentShadow" 
					                Style="{StaticResource ShadowStyle}">
                                    <ContentPresenter.RenderTransform>
                                        <TranslateTransform X="1.0" Y="1.0" />
                                    </ContentPresenter.RenderTransform>
                                </ContentPresenter>
                                <ContentPresenter HorizontalAlignment="Center" 
                            VerticalAlignment="Center" x:Name="content"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="SteelBlue" />
                                <Setter Property="Background" Value="Gold" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" >
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" >
                                            <GradientStop Color="Gold" Offset="0.2"/>
                                            <GradientStop Color="Red" Offset="0.85"/>
                                            <GradientStop Color="Gold" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter TargetName="content" Property="RenderTransform" >
                                    <Setter.Value>
                                        <TranslateTransform Y="1.0" />
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <!--<Trigger Property="IsDefaulted" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#FF282828" />
                            </Trigger>-->
                            <!--<Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#13EF8F" />
                            </Trigger>-->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.7" />
                                <Setter Property="Foreground" Value="Gray" />
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--<local:DiagnosColorConverter x:Key="diagnosColorConverter" />
        <local:KsgColorConverter x:Key="ksgColorConverter" />
        <local:DiagnosShowConverter x:Key="diagnosShowConverter" />-->

        <ControlTemplate x:Key="toggleButtonTemplate" TargetType="{x:Type ToggleButton}">
            <Grid
                        Width="22"
                        Height="22"
                        Background="Transparent">
                <Image x:Name="ExpandImage"
                                  Source="pack://application:,,,/Yamed.Icons;component/Icons/lock_open.png"
                                  HorizontalAlignment="Center" 
                                  VerticalAlignment="Center" />
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="IsChecked"
                     Value="True">
                    <Setter Property="Source"
                              TargetName="ExpandImage"
                            Value="pack://application:,,,/Yamed.Icons;component/Icons/lock_closed.png"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <Style x:Key="toggleButtonStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Template" Value="{StaticResource toggleButtonTemplate}" />
        </Style>

    </UserControl.Resources>

    <Grid x:Name="ZSlGrid">
        <Grid.Resources>
            <Style TargetType="{x:Type dxe:ComboBoxEdit}">
                <Setter Property="AutoComplete" Value="True" />
                <Setter Property="FilterCondition" Value="Contains" />
                <Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
                <Setter Property="ImmediatePopup" Value="True" />
                <Setter Property="IncrementalFiltering" Value="True" />
                <Setter Property="InvalidValueBehavior" Value="AllowLeaveEditor" />
                <Setter Property="NullValueButtonPlacement" Value="EditBox" />
                <Setter Property="ValidateOnTextInput" Value="False" />
                <!--<Setter Property="ValidateOnEnterKeyPressed" Value="True" />-->
                <!--<Setter Property="ShowSizeGrip" Value="True" />-->

            </Style>
            <Style TargetType="{x:Type dxg:LookUpEdit}">
                <Setter Property="AutoComplete" Value="True" />
                <Setter Property="FilterCondition" Value="Contains" />
                <Setter Property="HorizontalScrollBarVisibility" Value="Disabled" />
                <Setter Property="ImmediatePopup" Value="True" />
                <Setter Property="IncrementalFiltering" Value="True" />
                <Setter Property="InvalidValueBehavior" Value="AllowLeaveEditor" />
                <Setter Property="NullValueButtonPlacement" Value="EditBox" />
                <Setter Property="ValidateOnTextInput" Value="False" />
                <!--<Setter Property="ValidateOnEnterKeyPressed" Value="True" />-->
                <!--<Setter Property="ShowSizeGrip" Value="True" />-->

            </Style>

            <Style TargetType="{x:Type dxlc:LayoutItem}">
                <Setter Property="LabelPosition" Value="Left" />
            </Style>
        </Grid.Resources>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <dxb:BarContainerControl IsTabStop="False">
                <dxb:MainMenuControl AllowCustomizationMenu="False" AllowHide="False">
                    <dxb:BarButtonItem x:Name="SaveItem"
                                        BarItemDisplayMode="ContentAndGlyph" AllowGlyphTheming="True"
                                        Content="Сохранить случай (F5)" Alignment="Far"
                                        Glyph="{dx:DXImageGrayscale Image=Save_32x32.png}"
                                        ItemClick="ButtonBase_OnClick" LargeGlyph="{dx:DXImageGrayscale Image=Save_32x32.png}" />
                    <dxb:BarButtonItem x:Name="NewItem"
                                        BarItemDisplayMode="ContentAndGlyph" AllowGlyphTheming="True"
                                        Content="Создать новый случай (F7)" Alignment="Far"
                                        Glyph="pack://application:,,,/DevExpress.Images.v19.2;component/DevAV/Actions/NewEmployee_32x32.png"
                                        ItemClick="NewZSluch_OnClick" LargeGlyph="pack://application:,,,/DevExpress.Images.v19.2;component/DevAV/Actions/NewEmployee_32x32.png" />

                    <dxb:BarButtonItem Name="PrevButton" Content="Предыдущая запись" ItemClick="PrevButton_OnClick" Glyph="{dx:DXImage Image=Prev_32x32.png}" LargeGlyph="{dx:DXImage Image=Prev_32x32.png}" BarItemDisplayMode="ContentAndGlyph" AllowGlyphTheming="True" GlyphAlignment="Right"/>
                    <dxb:BarButtonItem Name="NextButton" Content="Следующая запись" ItemClick="NextButton_OnClick" Glyph="{dx:DXImage Image=Next_32x32.png}" LargeGlyph="{dx:DXImage Image=Next_32x32.png}" BarItemDisplayMode="ContentAndGlyph" AllowGlyphTheming="True" />
                    <dxb:BarEditItem Content="Настройка" Name="CheckBox1">
                        <dxb:BarEditItem.EditSettings >
                            <dxe:CheckEditSettings />
                        </dxb:BarEditItem.EditSettings>
                    </dxb:BarEditItem>
                </dxb:MainMenuControl>

            </dxb:BarContainerControl>

            <!--<Grid Background="#FFDA8615">
                -->
            <!--<dxe:CheckEdit Name="CheckBox1"/>-->
            <!--
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="5,2,5,2">
                    <Button Style="{StaticResource InformButton}" Click="ButtonBase_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Yamed.Icons;component/Icons/storage_drive_disk_flash_usb_check-512.png" Width="24" Height="24"/>
                            <TextBlock Text="Сохранить случай" VerticalAlignment="Center" Margin="10,0,0,0" FontSize="14"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource InformButton}" Click="NewZSluch_OnClick">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Yamed.Icons;component/Icons/list-add-512.png" Width="24" Height="24"/>
                            <TextBlock Text="Создать новый случай" VerticalAlignment="Center" Margin="10,0,0,0" FontSize="14"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>-->
            <dxlc:LayoutControl Padding="4,3,4,4" IsCustomization="{Binding EditValue, ElementName=CheckBox1}" Grid.Row="1" Orientation="Vertical" KeyUp="LayoutControl_KeyUp" VerticalAlignment="Stretch" StretchContentVertically="True" StretchContentHorizontally="True" >
                <dxlc:LayoutGroup View="Tabs" x:Name="PacientGroup" Orientation="Vertical" dxlc:LayoutControl.AllowVerticalSizing="True">
                    <dxlc:LayoutGroup Header="Обращение пациента" View="Group" Name="ObrLayoutGroup">
                        <dxlc:LayoutGroup Orientation="Vertical" dxlc:LayoutControl.AllowHorizontalSizing="True" >
                            <dxlc:LayoutItem Label="Полис" IsRequired="True" >
                                <dxe:ButtonEdit AllowDefaultButton="False" Tag="IgnoreEnterKeyTraversal" x:Name="polisBox"  EditValue="{Binding NPOLIS, UpdateSourceTrigger=PropertyChanged}"  MaxLength="16" KeyUp="PolisBox_OnKeyUp">
                                    <dxe:ButtonInfo Content="..." Click="PolisSearch_OnClick"/>
                                    <dxe:ButtonInfo Content="Поиск" Click="PolisEmr_OnClick" IsEnabled="False"/>
                                    <!--<dxe:ButtonInfo Content="ЭМК" Click="EmrPacient_OnClick"/>-->

                                </dxe:ButtonEdit>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="Серия">
                                    <dxe:TextEdit x:Name="serPolisTextBox" EditValue="{Binding SPOLIS, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Тип" ToolTip="Тип полиса ОМС" IsRequired="True" >
                                    <dxe:ComboBoxEdit  AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True"  x:Name="policyTypeBox" ItemsSource="{Binding}" ValueMember="Id" DisplayMember="NameWithId" EditValue="{Binding DataContext.VPOLIS, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" />
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutItem Label="СМО" IsRequired="True">
                                <dxe:ComboBoxEdit x:Name="smoBox" ItemsSource="{Binding}" ValueMember="smocod" DisplayMember="NameWithID" EditValue="{Binding DataContext.SMO, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Фамилия" IsRequired="True">
                                <dxe:TextEdit x:Name="FamBox" EditValue="{Binding FAM, UpdateSourceTrigger=PropertyChanged}" FontWeight="DemiBold" CharacterCasing="Upper" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Имя" IsRequired="True">
                                <dxe:TextEdit x:Name="ImBox" EditValue="{Binding IM, UpdateSourceTrigger=PropertyChanged}" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" CharacterCasing="Upper"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Отчество">
                                <dxe:TextEdit x:Name="OtBox" EditValue="{Binding OT, UpdateSourceTrigger=PropertyChanged}" Validate="Conditional_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" CharacterCasing="Upper"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutGroup dx:ScrollViewerTouchBehavior.IsEnabled="True" >
                                <dxlc:LayoutItem Label="Дата рожд." IsRequired="True">
                                    <dxe:DateEdit MaskType="DateTimeAdvancingCaret" Mask="d" x:Name="drBox1" EditValue="{Binding DR, UpdateSourceTrigger=PropertyChanged}" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Пол" IsRequired="True" >
                                    <dxe:ComboBoxEdit EditValue="{Binding DataContext.W, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" x:Name="wBox" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="Id" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" />
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutItem Label="Новорожд." IsRequired="True" >
                                <dxe:TextEdit x:Name="novorBox" EditValue="{Binding NOVOR, UpdateSourceTrigger=PropertyChanged}" ToolTip="Указывается в случае оказания медицин-ской помощи ребёнку до государственной регистрации рожде-ния.&#xA;                                          0 – признак отсут-ствует.&#xA;                                          Если значение при-знака отлично от ну-ля, он заполняется по следующему шабло-ну:&#xA;                                          ПДДММГГН, где&#xA;                                          П – пол ребёнка в со-ответствии с класси-фикатором V005 Приложения А;&#xA;                                          ДД – день рождения;&#xA;                                          ММ – месяц рожде-ния;&#xA;                                          ГГ – последние две цифры года рожде-ния;&#xA;                                          Н – порядковый но-мер ребёнка (до двух знаков)." />
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>

                        <dxlc:LayoutGroup dxlc:LayoutControl.AllowHorizontalSizing="True" Orientation="Vertical">
                            <dxlc:LayoutItem Label="Мед. орг." ToolTip="Код медицинской организации" >
                                <Grid x:Name="LpuGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit HorizontalAlignment="Stretch" x:Name="LpuEdit" VerticalAlignment="Top"  ItemsSource="{Binding}"  DisplayMember="NameWithID" ValueMember="mcod" EditValue="{Binding DataContext.LPU, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="LpuTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>

                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Усл. ок. пом." IsRequired="True" ToolTip="Условие оказания помощи">
                                <Grid x:Name="UslOkzGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate" HorizontalAlignment="Stretch" x:Name="UslOkzEdit" VerticalAlignment="Top" ItemsSource="{Binding}" EditValue="{Binding DataContext.USL_OK, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="id" EditValueChanged="UslOkzEdit_EditValueChanged" />
                                    <ToggleButton Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="UslOkzTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Вид помощи" IsRequired="True" >
                                <Grid x:Name="VidPomGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate" HorizontalAlignment="Stretch" x:Name="VidPomEdit" VerticalAlignment="Top" ItemsSource="{Binding}" EditValue="{Binding DataContext.VIDPOM, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="Id" />
                                    <ToggleButton Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="VidPomTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Форма пом." IsRequired="True" >
                                <Grid x:Name="ForPomGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit x:Name="ForPomEdit" DisplayMember="NameWithID" ValueMember="IDFRMMP" ItemsSource="{Binding}" EditValue="{Binding DataContext.FOR_POM, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="ForPomTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>

                            <dxlc:LayoutItem Label="Начало обр." ToolTip="Дата начала обращения / госпитализации" IsRequired="True" >
                                <Grid x:Name="DateZ1Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:DateEdit Validate="dxEdit_Validate" NullValueButtonPlacement="EditBox" x:Name="DateZ1Edit" EditValue="{Binding DataContext.DATE_Z_1, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" MaskType="DateTimeAdvancingCaret"  Mask="d" />
                                    <ToggleButton Grid.Column="1" x:Name="DateZ1Tb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Оконч. обр." ToolTip="Дата окончания обращения" IsRequired="True" >
                                <Grid x:Name="DateZ2Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:DateEdit Validate="dxEdit_Validate"   x:Name="DateZ2Edit" NullValueButtonPlacement="EditBox" EditValue="{Binding DataContext.DATE_Z_2, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}"  MaskType="DateTimeAdvancingCaret"  Mask="d" EditValueChanged="DateZ2Edit_EditValueChanged"  />
                                    <ToggleButton Grid.Column="1" x:Name="DateZ2Tb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Результат" ToolTip="Результат обращения / госпитализации" IsRequired="True" >
                                <Grid x:Name="RsltGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate"  x:Name="RsltEdit" EditValue="{Binding DataContext.RSLT, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" ItemsSource="{Binding}"    DisplayMember="NameWithID" ValueMember="IDRMP"    />
                                    <ToggleButton Grid.Column="1" x:Name="RsltTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Исход" ToolTip="Исход заболевания" IsRequired="True" >
                                <Grid x:Name="IshodGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate" x:Name="IshodEdit" VerticalAlignment="Top" ItemsSource="{Binding}" EditValue="{Binding DataContext.ISHOD, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" ValueMember="id" DisplayMember="NameWithID"        />
                                    <ToggleButton Grid.Column="1" x:Name="IshodTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>
                        <dxlc:LayoutGroup Orientation="Vertical">
                            <dxlc:LayoutGroup x:Name="Zsl3LayoutGroup" Header="LayoutGroup" View="Group" dxlc:LayoutControl.AllowHorizontalSizing="True" Orientation="Vertical">

                                <dxlc:LayoutItem Label="Способ опл." ToolTip="Код способа оплаты медицинской помощи" IsRequired="True" >
                                    <Grid x:Name="IdspGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <dxe:ComboBoxEdit Validate="dxEdit_Validate"  x:Name="IdspEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.IDSP, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="Id" />
                                        <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="IdspTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                    </Grid>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Рег. код опл." ToolTip="Региональный код способа оплаты МП">
                                    <Grid x:Name="SluchOsRegionGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <dxe:ComboBoxEdit  x:Name="SluchOsRegionEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.OS_SLUCH_REGION, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="Id" NullText="НЕТ ПРИЗНАКА" />
                                        <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="SluchOsRegionTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                    </Grid>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Возраст" ToolTip="Возрастной признак оплаты МП">
                                    <Grid x:Name="VozrGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <dxe:ComboBoxEdit  x:Name="VozrEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.VOZR, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NAME" ValueMember="ID" NullText="НЕТ ПРИЗНАКА" />
                                        <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="VozrTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                    </Grid>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="МО напр."  ToolTip="МО напрвившая на лечение">
                                    <Grid x:Name="NaprMoGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>
                                        <dxe:ComboBoxEdit HorizontalAlignment="Stretch" x:Name="NaprMoEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="mcod" EditValue="{Binding DataContext.NPR_MO, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" />
                                        <ToggleButton Grid.Column="1" x:Name="NaprMoTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                    </Grid>
                                </dxlc:LayoutItem>

                                <dxlc:LayoutItem Label="Дата напр."  ToolTip="Дата направления на лечение (диагностику, консультацию, госпитализацию)">
                                    <Grid x:Name="NaprDateGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>
                                        <dxe:DateEdit Validate="dxEdit_Validate" NullValueButtonPlacement="EditBox" x:Name="NaprDateEdit" EditValue="{Binding DataContext.NPR_DATE, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" MaskType="DateTimeAdvancingCaret"  Mask="d" />
                                        <ToggleButton Grid.Column="1" x:Name="NaprDateTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                    </Grid>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Результат дисп." ToolTip="Результат диспансеризации">
                                    <Grid x:Name="DispGrid">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <dxe:ComboBoxEdit EditValue="{Binding DataContext.RSLT_D, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" x:Name="RsltdBox" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="IDDR" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor"/>
                                        <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="RsTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                    </Grid>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Моб. бригада" ToolTip="Признак мобильной медицинской бригады" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="all">
                                    <Grid x:Name="MobGrid" HorizontalAlignment="Left">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="20" />
                                        </Grid.ColumnDefinitions>
                                        <dxe:ComboBoxEdit EditValue="{Binding DataContext.VBR, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" x:Name="VbrBox" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" HorizontalAlignment="Left"/>
                                        <ToggleButton Grid.Column="1" x:Name="MobTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                    </Grid>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutGroup>
                                    <dxlc:LayoutItem Label="Перевод"  ToolTip="Признак внутрибольничного перевода">
                                        <Grid x:Name="VbpGrid">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="20" />
                                            </Grid.ColumnDefinitions>
                                            <dxe:ComboBoxEdit x:Name="VbpEdit" ItemsSource="{Binding}" EditValue="{Binding DataContext.VB_P, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                                            <ToggleButton Grid.Column="1" x:Name="VbpTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                        </Grid>
                                    </dxlc:LayoutItem>

                                    <dxlc:LayoutItem Label="Прод. г-ии" ToolTip="Продолжительность госпитализации (Койко-дни/пациенто-дни)">
                                        <dxe:TextEdit EditValue="{Binding DataContext.KD_Z, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}"/>
                                    </dxlc:LayoutItem>
                                </dxlc:LayoutGroup>

                                <dxlc:LayoutGroup>
                                    <dxlc:LayoutItem Label="Сумма выст." ToolTip="Сумма выставленная">
                                        <dxe:TextEdit EditValue="{Binding DataContext.SUMV, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}"/>
                                    </dxlc:LayoutItem>
                                    <dxlc:LayoutItem Label="Оплата">
                                        <dxe:ComboBoxEdit  x:Name="OplataEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.OPLATA, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="IDIDST" />
                                    </dxlc:LayoutItem>
                                </dxlc:LayoutGroup>

                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="Сумма прин." ToolTip="Сумма принятая">
                                    <dxe:TextEdit EditValue="{Binding DataContext.SUMP, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Сумма уд." ToolTip="Сумма удержаий">
                                    <dxe:TextEdit EditValue="{Binding DataContext.SANK_IT, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>

                            </dxlc:LayoutGroup>

                        </dxlc:LayoutGroup>
                    </dxlc:LayoutGroup>

                    <dxlc:LayoutGroup Header="Условные данные">
                        <dxlc:LayoutGroup Orientation="Vertical">
                            <dxlc:LayoutItem Label="Вес при рождении" ToolTip="Указывается при оказании медицинской помощи недоношенным и маловесным детям.&#xA;Поле заполняется, если в качестве пациента указан ребёнок.">
                                <dxe:TextEdit EditValue="{Binding VNOV_D, UpdateSourceTrigger=PropertyChanged}" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Группа инв." ToolTip="Группа инвалидности">
                                <dxe:ComboBoxEdit  x:Name="InvEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.INV, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="МСЭ">
                                <dxe:ComboBoxEdit  x:Name="MseEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.MSE, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Ветеран">
                                <dxe:ComboBoxEdit  x:Name="VetEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.VETERAN, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="Id" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Статус зан." ToolTip="Статус занятости">
                                <dxe:ComboBoxEdit  x:Name="WorkStEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.WORK_STAT, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="Id" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Житель">
                                <dxe:ComboBoxEdit EditValue="{Binding DataContext.KOD_TER, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" x:Name="KodTerEdit" ItemsSource="{Binding}" DisplayMember="NameWithId" ValueMember="ID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" Validate="Information_OnValidate"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Категория населения (Соц. статус)" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37">
                                <dxe:ComboBoxEdit x:Name="Socstatus" ItemsSource="{Binding}" EditValue="{Binding DataContext.SOCSTATUS, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}"  DisplayMember="NameWithID" ValueMember="KATEGOR" VerticalAlignment="Top"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Социальный статус"  Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="all">
                                <dxe:ComboBoxEdit EditValue="{Binding DataContext.SOC_STAT,ElementName=PacientGroup,UpdateSourceTrigger=PropertyChanged}" x:Name="SocStatBox" ItemsSource="{Binding}" DisplayMember="NameWithId" ValueMember="ID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" Validate="Information_OnValidate"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Категория льготн.">
                                <dxe:ComboBoxEdit EditValue="{Binding DataContext.KAT_LGOT, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" x:Name="KatLgotBox" ItemsSource="{Binding}" DisplayMember="NameWithId" ValueMember="ID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" Validate="Information_OnValidate"/>
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>
                        <dxlc:LayoutGroup  Orientation="Vertical">
                            <dxlc:LayoutItem Label="Вид вызова" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37">
                                <dxe:ComboBoxEdit x:Name="Vidviz" DisplayMember="NameWithID" ValueMember="ID" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.VID_VIZ, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" Width="Auto" HorizontalAlignment="Stretch" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Вид бригады" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37">
                                <dxe:ComboBoxEdit x:Name="Vidbrig" DisplayMember="NameWithID" ValueMember="ID" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.VID_BRIG, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" Width="Auto" HorizontalAlignment="Stretch" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="График дн. стац." Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37">
                                <dxe:ComboBoxEdit x:Name="Grafdn" DisplayMember="NameWithID" ValueMember="ID" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.GRAF_DN, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" Width="Auto" HorizontalAlignment="Stretch" />
                            </dxlc:LayoutItem>

                            <dxlc:LayoutItem Label="Признак отказа" ToolTip="Признак отказа">
                                <dxe:ComboBoxEdit EditValue="{Binding DataContext.P_OTK, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" x:Name="PtkBox" ItemsSource="{Binding}" DisplayMember="NameWithId" ValueMember="ID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor"/>
                            </dxlc:LayoutItem>


                            <!--<dxlc:LayoutItem Label="Тип дисп." ToolTip="Тип диспансеризации">
                                <dxe:ComboBoxEdit EditValue="{Binding DataContext.DISP, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" x:Name="DispBox" ItemsSource="{Binding}" DisplayMember="NameWithId" ValueMember="ID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor"/>
                            </dxlc:LayoutItem>-->
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="ИД" Width="200">
                                    <dxe:TextEdit EditValue="{Binding DataContext.ID, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="УИД">
                                    <dxe:TextEdit EditValue="{Binding DataContext.ZSL_ID, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="True" />
                                </dxlc:LayoutItem>

                            </dxlc:LayoutGroup>
                            <dxlc:LayoutItem Label="Исправл. запись" ToolTip="Признак исправленной записи">
                                <dxe:ComboBoxEdit Validate="dxEdit_Validate"  x:Name="PrNovEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" EditValue="{Binding DataContext.PR_NOV, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID" />
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>
                        <dxlc:LayoutGroup />


                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Header="Данные пациента" Orientation="Vertical">
                        <dxlc:LayoutGroup Orientation="Horizontal">
                            <dxlc:LayoutGroup View="Group"  Orientation="Vertical" >
                                <dxlc:LayoutItem Label="Документ УДЛ">
                                    <dxe:ComboBoxEdit ItemsSource="{Binding}" x:Name="typeUdlBox" ValueMember="Id" EditValue="{Binding DataContext.DOCTYPE, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Серия" >
                                    <dxe:TextEdit EditValue="{Binding DOCSER, UpdateSourceTrigger=PropertyChanged}" x:Name="udlSerialBox" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Номер">
                                    <dxe:TextEdit EditValue="{Binding DOCNUM, UpdateSourceTrigger=PropertyChanged}" x:Name="udlNumberBox" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Дата выдачи">
                                    <dxe:DateEdit MaskType="DateTimeAdvancingCaret" Mask="d" EditValue="{Binding DOCDATE, UpdateSourceTrigger=PropertyChanged}" x:Name="docdateBox" InvalidValueBehavior="AllowLeaveEditor" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Организация выд. документ">
                                    <dxe:TextEdit EditValue="{Binding DOCORG, UpdateSourceTrigger=PropertyChanged}" x:Name="docorgBox" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Место рождения">
                                    <dxe:TextEdit EditValue="{Binding MR, UpdateSourceTrigger=PropertyChanged}" x:Name="mrBox" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="СНИЛС">
                                    <dxe:TextEdit x:Name="snilsBox" EditValue="{Binding SNILS, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Телефон пациента">
                                    <dxe:TextEdit EditValue="{Binding TEL, UpdateSourceTrigger=PropertyChanged}" x:Name="telBox" />
                                </dxlc:LayoutItem>

                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup Orientation="Vertical">
                                <dxlc:LayoutItem ToolTip="ОКАТО территории проживания" Label="ОКАТО терр. проживания">
                                    <dxe:ComboBoxEdit AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" x:Name="okatoTerBox" ItemsSource="{Binding}" ValueMember="KOD_OKATO" DisplayMember="OKATO" EditValue="{Binding DataContext.OKATOG, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem ToolTip="ОКАТО територии прибывания" Label="ОКАТО терр. прибывания">
                                    <dxe:ComboBoxEdit AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" InvalidValueBehavior="AllowLeaveEditor" x:Name="okatoTerPribBox" ItemsSource="{Binding}" ValueMember="KOD_OKATO" DisplayMember="OKATO" EditValue="{Binding DataContext.OKATOP, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>

                                <dxlc:LayoutItem Label="Регион страхования">
                                    <dxe:TextEdit/>
                                </dxlc:LayoutItem>


                                <dxlc:LayoutItem Label="ОГРН СМО">
                                    <dxe:TextEdit/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="ОКАТО терр. страхования" ToolTip="ОКАТО территории страхования">
                                    <dxe:TextEdit/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Наименование СМО">
                                    <dxe:TextEdit Height="48"  TextWrapping="Wrap" VerticalContentAlignment="Top" AcceptsReturn="True"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                        </dxlc:LayoutGroup>

                        <dxlc:LayoutItem Label="Адрес проживания">
                            <dxe:TextEdit x:Name="AdrBox" EditValue="{Binding AdressP, UpdateSourceTrigger=PropertyChanged}"  InvalidValueBehavior="AllowLeaveEditor"/>
                        </dxlc:LayoutItem>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Header="Представитель пациента" Orientation="Vertical">
                        <dxlc:LayoutItem Label="Фамилия" IsRequired="True">
                            <dxe:TextEdit x:Name="FampBox" EditValue="{Binding FAM_P, UpdateSourceTrigger=PropertyChanged}" FontWeight="DemiBold" CharacterCasing="Upper" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Имя" IsRequired="True">
                            <dxe:TextEdit x:Name="ImpBox" EditValue="{Binding IM_P, UpdateSourceTrigger=PropertyChanged}" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" CharacterCasing="Upper"/>
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Отчество">
                            <dxe:TextEdit x:Name="OtpBox" EditValue="{Binding OT_P, UpdateSourceTrigger=PropertyChanged}" Validate="Conditional_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" CharacterCasing="Upper"/>
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Дата рожд." IsRequired="True">
                            <dxe:DateEdit MaskType="DateTimeAdvancingCaret" Mask="d" x:Name="drpBox" EditValue="{Binding DR_P, UpdateSourceTrigger=PropertyChanged}" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Пол" IsRequired="True" >
                            <dxe:ComboBoxEdit EditValue="{Binding DataContext.W_P, ElementName=PacientGroup, UpdateSourceTrigger=PropertyChanged}" x:Name="wpBox" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="Id" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox" AutoComplete="True" ValidateOnTextInput="False" IncrementalFiltering="True" FilterCondition="Contains" ImmediatePopup="True" Validate="Required_OnValidate" InvalidValueBehavior="AllowLeaveEditor" FontWeight="DemiBold" />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Телефон">
                            <dxe:TextEdit/>
                        </dxlc:LayoutItem>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Header="История" Orientation="Vertical" Height="{Binding ElementName=ObrLayoutGroup, Path=ActualHeight}">
                        <dxlc:LayoutItem Label="Отображать только онкологию">
                            <dxe:CheckEdit/>
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Поиск по ФИО или полису">
                            <dxe:ButtonEdit/>
                        </dxlc:LayoutItem>

                        <dxg:GridControl x:Name="HistGridControl" SelectedItemChanged="SlGridControl_OnSelectedItemChanged" 
                                Grid.Row="1"
                                AutoGenerateColumns="None"
                                EnableSmartColumnsGeneration="True"
                                IsTabStop="False"
                                ItemsSource="{Binding}">

                            <dxg:GridControl.View>
                                <dxg:TableView AllowPerPixelScrolling="True" 
                                        ShowGroupPanel="False"
                                        ShowTotalSummary="False" />
                            </dxg:GridControl.View>
                            <dxg:GridColumn FieldName="Column1" Header="Фамилия"/>
                            <dxg:GridColumn FieldName="Column2" Header="Имя"/>
                            <dxg:GridColumn FieldName="Column3" Header="Отчество"/>
                            <dxg:GridColumn FieldName="Column4" Header="Полис"/>
                            <dxg:GridColumn FieldName="Column5" Header="Дата начала"/>
                            <dxg:GridColumn FieldName="Column6" Header="Дата окончания"/>
                            <dxg:GridColumn FieldName="Условие МП"/>
                            <dxg:GridColumn FieldName="Профиль"/>
                            <dxg:GridColumn FieldName="Врач"/>
                        </dxg:GridControl>

                    </dxlc:LayoutGroup>

                    <!--<dxlc:LayoutGroup View="Group" Header="Адрес по прописке" Orientation="Vertical">
                        <editors:FiasControl x:Name="FiasControl1" DataContext="{Binding D3_PACIENT_OMS}" Orientation="Vertical"/>
                    </dxlc:LayoutGroup>-->

                </dxlc:LayoutGroup>
                <dxlc:LayoutGroup >
                    <dxlc:LayoutGroup View="GroupBox" IsCollapsible="True" Padding="-10"  Header="Посещения / движения пациента" dxlc:LayoutControl.AllowHorizontalSizing="True">
                        <Grid x:Name="SlGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl IsTabStop="False">
                                <dxb:ToolBarControl
                                    AllowCustomizationMenu="False"
                                    AllowHide="False"
                                    AllowQuickCustomization="False"
                                    IsCollapsed="False"
                                    IsTabStop="False"
                                    ShowDragWidget="False"
                                    UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="SlAddItem"
                                        BarItemDisplayMode="ContentAndGlyph"
                                        Content="Добавить случай"
                                        Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                        ItemClick="SlAddItem_OnItemClick" />
                                    <dxb:BarButtonItem x:Name="SlDelItem"
                                        BarItemDisplayMode="ContentAndGlyph"
                                        Content="Удалить случай"
                                        Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                        ItemClick="SlDelItem_OnItemClick" />
                                </dxb:ToolBarControl>

                            </dxb:BarContainerControl>
                            <dxg:GridControl x:Name="SlGridControl" SelectedItemChanged="SlGridControl_OnSelectedItemChanged" 
                                Grid.Row="1"
                                AutoGenerateColumns="None"
                                IsTabStop="False"
                                ItemsSource="{Binding}">

                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True" 
                                        ShowGroupPanel="False"
                                        ShowTotalSummary="False" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn FieldName="ID" Header="ИД" ReadOnly="True" Width="100" Visible="False" />
                                <dxg:GridColumn FieldName="SL_ID" Header="УИД" ReadOnly="True" Width="120" Visible="False" />
                                <dxg:GridColumn FieldName="DATE_1" Width="75" 
                                    Header="Дата начала"
                                    ReadOnly="True" />
                                <dxg:GridColumn FieldName="DATE_2"
                                    Header="Дата окончания" Width="75"
                                    ReadOnly="True" />
                                <dxg:GridColumn x:Name="Ds0Column"
                                    FieldName="DS0"  Width="60"
                                    Header="Диагноз первичный"
                                    ReadOnly="True"/>
                                <dxg:GridColumn x:Name="DsColumn"
                                    FieldName="DS1"  Width="60"
                                    Header="Диагноз"
                                    ReadOnly="True">
                                    <!--<dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings Name="Ds1ColumnEdit" DisplayMember="NameWithID" ValueMember="IDDS" ItemsSource="{Binding}" AllowDefaultButton="False"/>
                                    </dxg:GridColumn.EditSettings>-->
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="TARIF" Header="Тариф" ReadOnly="True" Width="75" />
                                <dxg:GridColumn FieldName="ED_COL" Header="Кол-во" ReadOnly="True" Width="40" />
                                <dxg:GridColumn FieldName="SUM_M" Header="Сумма" ReadOnly="True" Width="75" />
                                <dxg:GridColumn x:Name="Column__SL__PROFIL" FieldName="PROFIL" Header="Профиль" FilterPopupMode="CheckedList" ColumnFilterMode="Value">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings Name="ProfilColumnEdit" DisplayMember="NameWithID" ValueMember="Id" ItemsSource="{Binding}" AllowDefaultButton="False"/>
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>

                            </dxg:GridControl>
                        </Grid>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup dxlc:LayoutControl.AllowHorizontalSizing="True"
                                      Header="Санкции" Width="{Binding ElementName=Zsl3LayoutGroup, Path=ActualWidth}" MinWidth="450"
                                      IsCollapsible="True"
                                      Padding="-10"
                                      View="GroupBox">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="OMS">
                                <dxb:ToolBarControl
                                                AllowCustomizationMenu="False"
                                                AllowHide="False"
                                                AllowQuickCustomization="False"
                                                IsCollapsed="False"
                                                IsTabStop="False"
                                                ShowDragWidget="False"
                                                UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="SankAddItem"
                                                   BarItemDisplayMode="ContentAndGlyph"
                                                   Content="Добавить"
                                                   Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                                   ItemClick="SankAddItem_OnItemClick" />
                                    <dxb:BarButtonItem x:Name="SankEditItem"
                                                   BarItemDisplayMode="ContentAndGlyph"
                                                   Content="Редактировать"
                                                   Glyph="pack://application:,,,/Yamed.Icons;component/Icons/pencil.png"
                                                   ItemClick="SankEditItem_OnItemClick" />
                                    <dxb:BarButtonItem x:Name="SankDelItem"
                                                   BarItemDisplayMode="ContentAndGlyph"
                                                   Content="Удалить"
                                                   Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                                   ItemClick="SankDelItem_OnItemClick" />
                                </dxb:ToolBarControl>
                            </dxb:BarContainerControl>
                            <dxg:GridControl x:Name="SankGridControl"
                                             Grid.Row="1"
                                             AutoGenerateColumns="None" 
                                             EnableSmartColumnsGeneration="True"
                                             ItemsSource="{Binding}" SelectionMode="Row">
                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True" 
                                                   AutoWidth="True"
                                                   ShowGroupPanel="False"
                                                   ShowTotalSummary="False" AllowEditing="False" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn FieldName="S_TIP" Header="Тип санкции">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings NullValueButtonPlacement="EditBox" Name="VidExpColumnEdit" DisplayMember="VIDNAME" ValueMember="Id" ItemsSource="{Binding}" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="S_TIP2" Header="Вид экспертизы" Width="150" >
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings NullValueButtonPlacement="EditBox" Name="VidExp2ColumnEdit" DisplayMember="NameWithID" ValueMember="IDVID" ItemsSource="{Binding}" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="S_OSN" Header="Основание">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings NullValueButtonPlacement="EditBox" Name="sanknameColumnEdit" DisplayMember="NameWithId" ValueMember="Osn" ItemsSource="{Binding}" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="S_SUM" Header="Сумма" />
                                <dxg:GridColumn FieldName="S_SUM2" Header="Штраф" />
                                <dxg:GridColumn FieldName="S_DATE" Header="Дата" />
                                <dxg:GridColumn FieldName="S_ZAKL" Header="Комментарий" />

                            </dxg:GridControl>
                            <dxlc:LayoutItem Grid.Row="3" Label="ФЛК" ToolTip="Продолжительность госпитализации (Койко-дни/пациенто-дни)" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="LPU">
                                <dxe:TextEdit EditValue="{Binding DataContext.EXP_COMENT, ElementName=ZSlGrid, UpdateSourceTrigger=PropertyChanged}"/>
                            </dxlc:LayoutItem>
                        </Grid>
                    </dxlc:LayoutGroup>
                </dxlc:LayoutGroup>
                <dxlc:LayoutGroup Header="LayoutGroup" View="Tabs" dxlc:LayoutControl.AllowVerticalSizing="True">
                    <dxlc:LayoutGroup View="Group" Header="Сведения о случае" >
                        <dxlc:LayoutGroup Header="LayoutGroup" View="Group" dxlc:LayoutControl.AllowHorizontalSizing="True" Orientation="Vertical">
                            <dxlc:LayoutItem Label="Повод обращения" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37"  VerticalAlignment="Top">
                                <Grid x:Name="PovodGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit x:Name="Povodobr"  DisplayMember="NameWithID" ValueMember="KC" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.POVOD, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="povodobrTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="ФАП" >
                                <Grid x:Name="FapGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <dxe:CheckEdit x:Name="fap" EditValueChanged="Fap_EditValueChanged" ></dxe:CheckEdit>
                                    <ToggleButton Grid.Column="1" x:Name="fapTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Подразделение" ToolTip="Подразделение медицинской организации" >
                                <Grid x:Name="PodrGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit HorizontalAlignment="Stretch" x:Name="PodrEdit" VerticalAlignment="Top"  ItemsSource="{Binding}"  DisplayMember="NameWithID" ValueMember="Id" EditValue="{Binding SelectedItem.LPU_1, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="PodrTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>

                            <dxlc:LayoutItem Label="Отделение" >
                                <Grid x:Name="OtdelGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit HorizontalAlignment="Stretch" x:Name="OtdelEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="Id" EditValue="{Binding SelectedItem.PODR, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="OtdelTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>

                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Поступление" ToolTip="Признак поступления / перевода">
                                <Grid x:Name="PostEdit">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit HorizontalAlignment="Stretch" Validate="dxEdit_Validate" x:Name="PperEdit" VerticalAlignment="Top"  ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID" EditValue="{Binding SelectedItem.P_PER, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="PostTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Профиль койки (региональный)" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37">
                                <Grid x:Name="ProfKr">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit x:Name="ProfilkEditreg" DisplayMember="NameWithID" ValueMember="KOD" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.PROFIL_REG, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="ProfKrTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>

                            <dxlc:LayoutItem Label="Профиль койки" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="all">
                                <Grid x:Name="ProfK">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:ComboBoxEdit HorizontalAlignment="Stretch" Validate="dxEdit_Validate" x:Name="ProfilkEdit" VerticalAlignment="Top"  DisplayMember="NameWithID" ValueMember="IDK_PR" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.PROFIL_K, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton Grid.Column="1" x:Name="ProfKTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Вид ВМП">
                                <dxe:ComboBoxEdit x:Name="HVidBox"
                                          AllowSpinOnMouseWheel="False"
                                          AutoComplete="True"
                                          DisplayMember="NameWithID"
                                          EditValue="{Binding SelectedItem.VID_HMP,
                                                              ElementName=SlGridControl,
                                                              UpdateSourceTrigger=PropertyChanged}"
                                          EditValueChanged="HVidBox_OnEditValueChanged"
                                          FilterCondition="Contains"
                                          HorizontalScrollBarVisibility="Disabled"
                                          ImmediatePopup="True"
                                          IncrementalFiltering="True"
                                          InvalidValueBehavior="AllowLeaveEditor"
                                          ItemsSource="{Binding}"
                                          NullValueButtonPlacement="EditBox"
                                          ValidateOnTextInput="False"
                                          ValueMember="IDHVID" 
                                                   />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Метод ВМП">
                                <dxe:ComboBoxEdit x:Name="HMetodBox"
                                          AllowSpinOnMouseWheel="False"
                                          AutoComplete="True"
                                          DisplayMember="NameWithID"
                                          EditValue="{Binding SelectedItem.METOD_HMP,
                                                              ElementName=SlGridControl,
                                                              UpdateSourceTrigger=PropertyChanged}"
                                          FilterCondition="Contains"
                                          HorizontalScrollBarVisibility="Disabled"
                                          ImmediatePopup="True"
                                          IncrementalFiltering="True"
                                          InvalidValueBehavior="AllowLeaveEditor"
                                          ItemsSource="{Binding}"
                                          NullValueButtonPlacement="EditBox"
                                          ValidateOnTextInput="False"
                                          ValueMember="IDHM" />
                            </dxlc:LayoutItem>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="№ талона ВМП" ToolTip="Номер талона на ВМП">
                                    <dxe:TextEdit x:Name="TalNumEdit" EditValue="{Binding SelectedItem.TAL_NUM, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" />
                                </dxlc:LayoutItem>

                                <dxlc:LayoutItem Label="Дата тал." ToolTip="Дата выдачи талона на ВМП">
                                    <dxe:DateEdit Validate="dxEdit_Validate" NullValueButtonPlacement="EditBox"  x:Name="TaldEdit" EditValue="{Binding SelectedItem.TAL_D, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" MaskType="DateTimeAdvancingCaret"  Mask="d" />
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutItem Label="Дата план. ВМП" ToolTip="Дата планируемой госпитализации (ВМП)">
                                <dxe:DateEdit Validate="dxEdit_Validate" NullValueButtonPlacement="EditBox"  x:Name="TalpEdit" EditValue="{Binding SelectedItem.TAL_P, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" MaskType="DateTimeAdvancingCaret"  Mask="d" />
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>
                        <dxlc:LayoutGroup dxlc:LayoutControl.AllowHorizontalSizing="True" Orientation="Vertical">
                            <dxlc:LayoutItem Label="Врач" IsRequired="True" >
                                <Grid x:Name="DoctGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <!--AllowCollectionView="True"-->
                                    <dxe:ComboBoxEdit x:Name="DoctEdit" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="SNILS" EditValue="{Binding SelectedItem.IDDOKT, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"        />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="DoctTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Специальность" IsRequired="True">
                                <Grid x:Name="PrvsGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate" x:Name="PrvsEdit" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="IDSPEC" EditValue="{Binding SelectedItem.PRVS, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>

                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="PrvsTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Профиль МП" IsRequired="True">
                                <Grid x:Name="ProfilGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate" x:Name="ProfilEdit" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="Id"         EditValue="{Binding SelectedItem.PROFIL, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"/>
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="ProfilTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Дет." ToolTip="Признак детского профиля" IsRequired="True">
                                <Grid x:Name="DetGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit Validate="dxEdit_Validate"  x:Name="DetEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.DET, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="DetTb" HorizontalAlignment="Center" VerticalAlignment="Center" Content="{x:Null}" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>

                            <dxlc:LayoutItem Label="Цель посещения">
                                <Grid x:Name="PCelTypeGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit   x:Name="PCelEdit" ItemsSource="{Binding}"  EditValue="{Binding SelectedItem.P_CEL25, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"        DisplayMember="NameWithID" ValueMember="IDPC" />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="PCelTypeTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Характер осн. заб.">
                                <Grid x:Name="CzabGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit x:Name="CzabEdit" ItemsSource="{Binding}"  EditValue="{Binding SelectedItem.C_ZAB, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="IDCZ" />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="CzabTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>

                            <dxlc:LayoutItem Label="№ истории болезни">
                                <dxe:TextEdit x:Name="NHistoryEdit" EditValue="{Binding SelectedItem.NHISTORY, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"  ToolTip="Номер истории болезни/ талона амбулаторного пациента"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Койко-дни">
                                <dxe:TextEdit x:Name="KdEdit" EditValue="{Binding SelectedItem.KD, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"  ToolTip="Койко-/пациенто-дни"/>
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>
                        <dxlc:LayoutGroup Header="LayoutGroup" View="Group" dxlc:LayoutControl.AllowHorizontalSizing="True" Orientation="Vertical">

                            <dxlc:LayoutItem Label="Диагноз осн." ToolTip="Диагноз основной" IsRequired="True">
                                <Grid x:Name="Ds1Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxg:LookUpEdit x:Name="Ds1Edit" 
                                        DisplayMember="IDDS" DisplayTextConverter="{StaticResource diagnosShowConverter}"
                                        ValueMember="IDDS"
                                        AutoPopulateColumns="False"
                                        AutoComplete="True"
                                        IncrementalFiltering="True" EditValue="{Binding SelectedItem.DS1, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"
                                        ImmediatePopup="True" FilterCondition="Contains"
                                        IsPopupAutoWidth="True" ItemsSource="{Binding}" GotFocus="mkbBox_GotFocus" LostFocus="mkbBox_LostFocus" HorizontalScrollBarVisibility="Disabled" NullValueButtonPlacement="EditBox">
                                        <dxg:LookUpEdit.PopupContentTemplate>
                                            <ControlTemplate>
                                                <dxg:GridControl x:Name="PART_GridControl">
                                                    <dxg:GridControl.Resources>
                                                        <Style x:Key="customCellStyle"
                                            		BasedOn="{StaticResource {dxgt:GridRowThemeKey ResourceKey=LightweightCellStyle}}" TargetType="{x:Type dxg:LightweightCellEditor}">
                                                            <Setter Property="Foreground" Value="{Binding RowData.Row.PAYABLE, Converter={StaticResource diagnosColorConverter}}" />
                                                        </Style>
                                                    </dxg:GridControl.Resources>

                                                    <dxg:GridControl.Columns>
                                                        <dxg:GridColumn FieldName="IDDS" Header="Код МКБ" Width="30" />
                                                        <dxg:GridColumn FieldName="DSNAME" Header="Наименование МКБ" />
                                                        <!--<dxg:GridColumn FieldName="Payable"  />-->
                                                    </dxg:GridControl.Columns>

                                                    <dxg:GridControl.View>
                                                        <dxg:TableView CellStyle="{StaticResource customCellStyle}" AutoWidth="True" />
                                                    </dxg:GridControl.View>
                                                </dxg:GridControl>

                                            </ControlTemplate>
                                        </dxg:LookUpEdit.PopupContentTemplate>
                                    </dxg:LookUpEdit>

                                    <!--<dxg:LookUpEdit Validate="dxEdit_Validate" x:Name="Ds1Edit" 
                                                DisplayMember="IDDS" 
                                                ValueMember="IDDS" 
                                                AutoPopulateColumns="False"
                                        
                                                EditValue="{Binding SelectedItem.DS1, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"
                                         
                                                IsPopupAutoWidth="True" ItemsSource="{Binding}" GotFocus="mkbBox_GotFocus" LostFocus="mkbBox_LostFocus"    >
                                        <dxg:LookUpEdit.PopupContentTemplate>
                                            <ControlTemplate>
                                                <dxg:GridControl x:Name="PART_GridControl" >

                                                    <dxg:GridControl.View>
                                                        <dxg:TableView  AutoWidth="True" />

                                                        -->
                                    <!--CellStyle="{StaticResource customCellStyle}"-->
                                    <!--

                                                    </dxg:GridControl.View>
                                                    -->
                                    <!--<dxg:GridControl.Resources>
                                                        <Style x:Key="customCellStyle"
                                                BasedOn="{StaticResource {dxgt:GridRowThemeKey ResourceKey=LightweightCellStyle}}" TargetType="{x:Type dxg:LightweightCellEditor}">
                                                            <Setter Property="Foreground" Value="{Binding RowData.Row.PAYABLE}"/>
                                                        </Style>
                                                    </dxg:GridControl.Resources>-->
                                    <!--
                                                    <dxg:GridColumn FieldName="IDDS" Header="Код МКБ" Width="30"/>
                                                    <dxg:GridColumn FieldName="DSNAME" Header="Наименование МКБ"/>
                                                </dxg:GridControl>

                                            </ControlTemplate>
                                        </dxg:LookUpEdit.PopupContentTemplate>
                                    </dxg:LookUpEdit>-->
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="Ds1Tb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Впервые выявл." ToolTip="Основной диагноз впервые выявлен">
                                <Grid x:Name="Ds1PrGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit x:Name="Ds1PrEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.DS1_PR, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="Ds1PrTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Дисп. набл." ToolTip="Диспансерное наблюдение по основному диагнозу">
                                <Grid x:Name="DnGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit x:Name="DnEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.DN, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="DnTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>


                            <dxlc:LayoutItem Label="Реабилитация" ToolTip="Признак реабилитации">
                                <Grid x:Name="ReabnGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit x:Name="ReabnEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.REAB, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="ReabnTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>

                            <!--<dxlc:LayoutItem Label="Реабилитация" ToolTip="Признак реабилитации">
                                <dxe:ComboBoxEdit x:Name="ReabnEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.REAB, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                            </dxlc:LayoutItem>-->
                            <dxlc:LayoutItem Label="Подозр. онко" ToolTip="Признак подозрения на злокачественное новообразование">
                                <Grid x:Name="DsOnkGrid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <dxe:ComboBoxEdit x:Name="DsOnkEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.DS_ONK, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                                    <ToggleButton  Style="{DynamicResource toggleButtonStyle}" Grid.Column="1" x:Name="DsOnkTb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <!--<dxlc:LayoutItem Label="Подозр. онко" ToolTip="Признак подозрения на злокачественное новообразование">
                                <dxe:ComboBoxEdit x:Name="DsOnkEdit" ItemsSource="{Binding}" EditValue="{Binding SelectedItem.DS_ONK, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" DisplayMember="NameWithID" ValueMember="ID"        />
                            </dxlc:LayoutItem>-->
                            <dxlc:LayoutItem Label="Дата начала" IsRequired="True">
                                <Grid x:Name="Date1Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:DateEdit Validate="dxEdit_Validate" NullValueButtonPlacement="EditBox"  x:Name="Date1Edit" EditValue="{Binding SelectedItem.DATE_1, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}" MaskType="DateTimeAdvancingCaret"  Mask="d" />
                                    <ToggleButton Grid.Column="1" x:Name="Date1Tb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Дата окончания" IsRequired="True">
                                <Grid x:Name="Date2Grid">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="20" />
                                    </Grid.ColumnDefinitions>
                                    <dxe:DateEdit Validate="dxEdit_Validate" NullValueButtonPlacement="EditBox"  x:Name="Date2Edit" EditValue="{Binding SelectedItem.DATE_2, ElementName=SlGridControl, UpdateSourceTrigger=PropertyChanged}"  MaskType="DateTimeAdvancingCaret"  Mask="d"/>
                                    <ToggleButton Grid.Column="1" x:Name="Date2Tb" HorizontalAlignment="Center" VerticalAlignment="Center" IsTabStop="False" Style="{DynamicResource toggleButtonStyle}" />
                                </Grid>
                            </dxlc:LayoutItem>

                        </dxlc:LayoutGroup>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup 
                                  Header="Услуги"
                                  Padding="-8"
                                  View="Group">
                        <Grid x:Name="UslGrid">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl >
                                <dxb:ToolBarControl
                                            AllowCustomizationMenu="False"
                                            AllowHide="False"
                                            AllowQuickCustomization="False"
                                            IsCollapsed="False"
                                            IsTabStop="False"
                                            ShowDragWidget="False"
                                            UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="UslTemplateItem"
                                               BarItemDisplayMode="ContentAndGlyph"
                                               Content="Шаблоны"
                                               Glyph="pack://application:,,,/Yamed.Icons;component/Icons/catalogs.png"
                                               ItemClick="UslTemplateItem_OnItemClick" Alignment="Near" />
                                    <dxb:BarButtonItem x:Name="UslAutoTemplateItem"
                                               BarItemDisplayMode="ContentAndGlyph"
                                               Content="Стандарт"
                                               Glyph="pack://application:,,,/Yamed.Icons;component/Icons/catalogs.png"
                                               ItemClick="UslAutoTemplateItem_ItemClick" Alignment="Near" />

                                    <dxb:BarItemSeparator />
                                    <dxb:BarButtonItem x:Name="UslAddItem"
                                               BarItemDisplayMode="ContentAndGlyph"
                                               Content="Добавить"
                                               Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                               ItemClick="UslAddItem_OnItemClick" />
                                    <dxb:BarButtonItem x:Name="UslEditItem"
                                               BarItemDisplayMode="ContentAndGlyph"
                                               Content="Редактировать"
                                               Glyph="pack://application:,,,/Yamed.Icons;component/Icons/pencil.png"
                                               ItemClick="UslEditItem_OnItemClick" />
                                    <dxb:BarButtonItem x:Name="UslDelItem"
                                               BarItemDisplayMode="ContentAndGlyph"
                                               Content="Удалить"
                                               Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                               ItemClick="UslDelItem_OnItemClick" />
                                </dxb:ToolBarControl>

                            </dxb:BarContainerControl>

                            <dxg:GridControl x:Name="UslGridControl" 
                                         Grid.Row="1" 
                                         AutoGenerateColumns="None"
                                         EnableSmartColumnsGeneration="True"
                                         ItemsSource="{Binding}">
                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True" ShowFilterPanelMode="Never"
                                               ShowGroupPanel="False"
                                               ShowTotalSummary="False" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn x:Name="UslOtdelColumn"
                                                FieldName="PODR"
                                                Header="Отделение"
                                                ReadOnly="False" >
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslOtdelColumnEdit"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="Id" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>

                                <dxg:GridColumn x:Name="UslDoctorColumn"
                                                FieldName="CODE_MD"
                                                Header="Врач"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslDoctorColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="SNILS" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslPrvsColumn"
                                                FieldName="PRVS"
                                                Header="Специальность"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslPrvsColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="IDSPEC" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>

                                <dxg:GridColumn x:Name="UslProfilColumn"
                                                FieldName="PROFIL"
                                                Header="Профиль"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslProfilColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="Id" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>

                                <dxg:GridColumn FieldName="DATE_IN"
                                                Header="Дата начала"
                                                ReadOnly="False" />

                                <dxg:GridColumn FieldName="DATE_OUT"
                                                Header="Дата окончания"
                                                ReadOnly="False" />
                                <dxg:GridColumn x:Name="UslDsColumn"
                                                FieldName="DS"
                                                Header="Диагноз"
                                                ReadOnly="False">

                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslDsColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="IDDS" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslComentColumn"
                                                FieldName="COMENTU"
                                                Header="Комментарий"
                                                ReadOnly="False"/>
                                <dxg:GridColumn x:Name="UslVidVmeColumn"
                                                FieldName="VID_VME"
                                                Header="Вид медицинского вмешательства"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslVidVmeColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>

                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslPOtkColumn"
                                                FieldName="P_OTK"
                                                Header="Признак отказа"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslPOtkColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslNplColumn"
                                                FieldName="NPL"
                                                Header="Неполный объем"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslNplEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="KODSPColumn" 
                                                FieldName="KOD_SP"
                                                Header="Код должности"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="KODSPColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="KOD_SP" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslCodeUslColumn" 
                                                FieldName="CODE_USL"
                                                Header="Код услуги"
                                                ReadOnly="False">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslCodeUslColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslCodeUslColumnIv" 
                                                FieldName="CODE_USL"
                                                Header="Код услуги"
                                                ReadOnly="False"
                                                >
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="UslCodeUslColumnEditIv" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="KODUSL"/>
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn x:Name="UslKolUslColumn"
                                                FieldName="KOL_USL"
                                                Header="Количество"
                                                ReadOnly="False"/>
                            </dxg:GridControl>
                        </Grid>

                    </dxlc:LayoutGroup>

                    <dxlc:LayoutGroup View="Group" Header="Диагнозы" Padding="-8" >
                        <Grid >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl >
                                <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="Ds2AddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить диагноз"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                            ItemClick="Ds2AddItem_ItemClick" />
                                    <dxb:BarButtonItem x:Name="Ds2DelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить диагноз"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="Ds2DelItem_ItemClick"/>
                                </dxb:ToolBarControl>
                            </dxb:BarContainerControl>

                            <dxg:GridControl x:Name="Ds2GridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}" IsFilterEnabled="True">
                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" AllowColumnFiltering="True" AllowFilterEditor="True" ShowFilterPanelMode="Never" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn x:Name="Ds2Column"
                                        FieldName="DS"
                                        Header="Код по МКБ10">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="Ds2ColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="IDDS" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="DS_PR" Header="Выявлен впервые">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="Ds2PrColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="DS_TYPE" Header="Тип диагноза">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="Ds2TypeColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="PR_DS2_N" Header="Диспансерное наблюдение">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="PrDs2nColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>

                            </dxg:GridControl>
                        </Grid>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Name="KsgGroup"
                            Header="КСГ/КПГ"
                              Padding="-8"
                            View="Group">

                        <dxlc:LayoutGroup Orientation="Vertical">
                            <dxlc:LayoutItem Label="Номер КСГ" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="all">
                                <dxe:ComboBoxEdit Validate="dxEdit_Validate" x:Name="NksgEdit" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="K_KSG" EditValue="{Binding DataContext.N_KSG, ElementName=KsgGroup, UpdateSourceTrigger=PropertyChanged}"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Номер КСГ" Visibility="{Binding RelativeSource={RelativeSource Self}, Path=Tag, Converter={StaticResource roleVisibility}, UpdateSourceTrigger=PropertyChanged}" Tag="37">
                                <dxe:ComboBoxEdit x:Name="NksgIvEdit" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="N_ST_STR" EditValue="{Binding DataContext.N_KSG, ElementName=KsgGroup, UpdateSourceTrigger=PropertyChanged}"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="Модель" ToolTip="Модель определения КСГ">
                                    <dxe:TextEdit EditValue="{Binding VER_KSG, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Подгруппа" ToolTip="Признак использования подгруппы">
                                    <dxe:TextEdit EditValue="{Binding KSG_PG, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutItem Label="Номер КПГ" ToolTip="Номер КПГ">
                                <dxe:TextEdit EditValue="{Binding N_KPG, UpdateSourceTrigger=PropertyChanged}"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutItem Label="Базовая ставка" ToolTip="Базовая ставка">
                                <dxe:TextEdit EditValue="{Binding BZTSZ, UpdateSourceTrigger=PropertyChanged}"/>
                            </dxlc:LayoutItem>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="Коэфф. затр." ToolTip="Коэффициент затратоемкости">
                                    <dxe:TextEdit EditValue="{Binding KOEF_Z, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Коэфф. дифф." ToolTip="Коэффициент дифференциации">
                                    <dxe:TextEdit EditValue="{Binding KOEF_D, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="Управл. коэфф." ToolTip="Управленческий коэффициент">
                                    <dxe:TextEdit EditValue="{Binding KOEF_UP, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Коэфф. уровня" ToolTip="Коэффициент уровня/подуровня оказания медицинской помощи">
                                    <dxe:TextEdit EditValue="{Binding KOEF_U, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup>
                                <dxlc:LayoutItem Label="Признак КСЛП" ToolTip="Признак использования КСЛП">
                                    <dxe:TextEdit EditValue="{Binding SL_K, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                                <dxlc:LayoutItem Label="Коэфф. КСЛП" ToolTip="Применённый коэффициент сложности лечения пациента">
                                    <dxe:TextEdit EditValue="{Binding IT_SL, UpdateSourceTrigger=PropertyChanged}"/>
                                </dxlc:LayoutItem>
                            </dxlc:LayoutGroup>
                        </dxlc:LayoutGroup>

                        <dxlc:LayoutGroup Header="КСЛП" View="GroupBox" Padding="-10">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <dxb:BarContainerControl >
                                    <dxb:ToolBarControl
                                                AllowCustomizationMenu="False"
                                                AllowHide="False"
                                                AllowQuickCustomization="False"
                                                IsCollapsed="False"
                                                IsTabStop="False"
                                                ShowDragWidget="False"
                                                UseWholeRow="True">
                                        <dxb:BarButtonItem x:Name="KslpAddItem"
                                                   BarItemDisplayMode="ContentAndGlyph"
                                                   Content="Добавить"
                                                   Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                                   ItemClick="KslpAddItem_ItemClick" />
                                        <dxb:BarButtonItem x:Name="KslpDelItem"
                                                   BarItemDisplayMode="ContentAndGlyph"
                                                   Content="Удалить"
                                                   Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                                   ItemClick="KslpDelItem_ItemClick" />
                                    </dxb:ToolBarControl>
                                </dxb:BarContainerControl>

                                <dxg:GridControl x:Name="KslpGridControl"
                                             Grid.Row="1"
                                             AutoGenerateColumns="None"
                                             EnableSmartColumnsGeneration="True"
                                             ItemsSource="{Binding}">
                                    <dxg:GridControl.View>
                                        <dxg:TableView AllowPerPixelScrolling="True" CellValueChanged="GridViewBase_OnCellValueChanged" CellValueChanging="GridViewBase_OnCellValueChanging"
                                                   AutoWidth="True"
                                                   ShowGroupPanel="False"
                                                   ShowTotalSummary="False" />
                                    </dxg:GridControl.View>
                                    <dxg:GridColumn x:Name="KslpCodeColumn"
                                                    FieldName="IDSL"
                                                    Header="Код КСЛП">
                                        <dxg:GridColumn.EditSettings>
                                            <dxe:ComboBoxEditSettings x:Name="KslpCodeColumnEdit" 
                                                                      AutoComplete="True"
                                                                      DisplayMember="NameWithID"
                                                                      FilterCondition="Contains"
                                                                      ImmediatePopup="True"
                                                                      IncrementalFiltering="True"
                                                                      ItemsSource="{Binding}"
                                                                      NullValueButtonPlacement="EditBox"
                                                                      ValueMember="IDSL" />
                                        </dxg:GridColumn.EditSettings>
                                    </dxg:GridColumn>
                                    <dxg:GridColumn x:Name="KslpColumn"
                                                    FieldName="Z_SL"
                                                    Header="Коэф. КСЛП">
                                        <dxg:GridColumn.EditSettings>
                                            <dxe:TextEditSettings x:Name="KslpColumnEdit"/>
                                        </dxg:GridColumn.EditSettings>
                                    </dxg:GridColumn>

                                </dxg:GridControl>
                            </Grid>
                        </dxlc:LayoutGroup>
                        <dxlc:LayoutGroup Header="Критерий" View="GroupBox" Padding="-10">
                            <Grid >
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <dxb:BarContainerControl >
                                    <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                        <dxb:BarButtonItem x:Name="CritAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="CritAddItem_ItemClick"/>
                                        <dxb:BarButtonItem x:Name="CritDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="CritDelItem_ItemClick"/>
                                    </dxb:ToolBarControl>
                                </dxb:BarContainerControl>

                                <dxg:GridControl x:Name="CritGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                    <dxg:GridControl.View>
                                        <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" />
                                    </dxg:GridControl.View>
                                    <dxg:GridColumn x:Name="CritColumn"
                                        FieldName="CRIT"
                                        Header="Код критерия ">
                                        <dxg:GridColumn.EditSettings>
                                            <dxe:ComboBoxEditSettings x:Name="CritColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="IDDKK" />
                                        </dxg:GridColumn.EditSettings>
                                    </dxg:GridColumn>
                                </dxg:GridControl>
                            </Grid>

                        </dxlc:LayoutGroup>

                    </dxlc:LayoutGroup>

                    <dxlc:LayoutGroup
                            Header="Назначения (ДИСП)"
                              Padding="-8"
                            View="Group">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl >
                                <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="NaznAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                            ItemClick="NaznAddItem_ItemClick"/>
                                    <dxb:BarButtonItem x:Name="NaznDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                            ItemClick="NaznDelItem_ItemClick"/>
                                </dxb:ToolBarControl>
                            </dxb:BarContainerControl>

                            <dxg:GridControl x:Name="NazGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" ShowFilterPanelMode="Never" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn FieldName="NAZ_R" Header="Вид назначения" ToolTip="Вид назначения">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazrColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>

                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAZ_SP" Header="Специальность врача" ToolTip="Специальность врача">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazSpColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="IDSPEC" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAZ_V" Header="Метод" ToolTip="Метод диагностического исследования">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazvColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="IDMET" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAZ_USL" Header="Услуга" ToolTip="Медицинская услуга (код), указанная в направлении">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazUslColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAPR_DATE" Header="Дата направления" ToolTip="Дата направления" >
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:DateEditSettings NullValueButtonPlacement="EditBox"/>
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAPR_MO" Header="Код МО" ToolTip="Код МО, куда оформлено направление">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazNaprMoColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="mcod" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAZ_PMP" Header="Профиль МП">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazPmpColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="Id" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAZ_PK" Header="Профиль койки">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NazPkColumnEdit" AutoComplete="True" FilterCondition="Contains" ImmediatePopup="True" IncrementalFiltering="True"
                                                                  AllowDefaultButton="True"
                                                                  DisplayMember="NameWithID"
                                                                  ItemsSource="{Binding}"
                                                                  ValueMember="IDK_PR" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                            </dxg:GridControl>
                        </Grid>
                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Header="Направление (ОНКО)" Padding="-8">
                        <Grid >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl >
                                <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="NaprAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                            ItemClick="NaprAddItem_OnItemClick" />
                                    <dxb:BarButtonItem x:Name="NaprDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="NaprDelItem_ItemClick"/>
                                </dxb:ToolBarControl>
                            </dxb:BarContainerControl>

                            <dxg:GridControl x:Name="NaprGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" ShowFilterPanelMode="Never" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn x:Name="NaprColumn"
                                        FieldName="NAPR_DATE"
                                        Header="Дата направления">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:DateEditSettings NullValueButtonPlacement="EditBox"/>
                                    </dxg:GridColumn.EditSettings>

                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAPR_MO" Header="Код МО">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NaprMoColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="mcod" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAPR_V" Header="Вид направления">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NaprvColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="IDVN" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="MET_ISSL" Header="Метод диагн. исследования">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="MetIsslColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="IDMET" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="NAPR_USL" Header="Код услуги в направлении">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="NaprUslColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID" />
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>

                            </dxg:GridControl>
                        </Grid>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Header="Случай (ОНКО)" Padding="-8">

                        <!--<Grid Width="350">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl >
                                <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                    <dxb:BarButtonItem
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="OnkSlAddItem_Click"/>
                                    <dxb:BarButtonItem 
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="OnkSlDel_Click"/>
                                </dxb:ToolBarControl>
                            </dxb:BarContainerControl>

                        </Grid>-->

                        <dxlc:LayoutGroup Orientation="Vertical">

                            <dxlc:LayoutGroup Header="Сведения о случае лечения онкологического заболевания" View="GroupBox" Orientation="Vertical" Padding="-8">

                                <dxlc:LayoutGroup Header="LayoutGroup" View="Group" VerticalAlignment="Top" >
                                    <dxb:BarContainerControl>
                                        <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                            <dxb:BarButtonItem
                                                x:Name="OnkslAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="OnkSlAddItem_Click"/>
                                            <dxb:BarButtonItem 
                                                x:Name="OnkslDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="OnkSlDel_Click"/>
                                        </dxb:ToolBarControl>
                                    </dxb:BarContainerControl>
                                </dxlc:LayoutGroup>
                                <dxlc:LayoutGroup Name="OnkSlGroup" Orientation="Vertical" View="Group" DataContextChanged="OnkSlGroup_DataContextChanged">
                                    <dxlc:LayoutItem Label="Повод обр.">
                                        <dxe:ComboBoxEdit x:Name="Ds1tEdit" Validate="dxEdit_Validate" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID_REAS" EditValue="{Binding DataContext.DS1_T, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}"/>
                                    </dxlc:LayoutItem>
                                    <dxlc:LayoutGroup>
                                        <dxlc:LayoutItem Label="Стадия заб.">
                                            <dxe:ComboBoxEdit x:Name="StadEdit" Validate="dxEdit_Validate" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID_St" EditValue="{Binding DataContext.STAD, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}"/>
                                        </dxlc:LayoutItem>
                                        <dxlc:LayoutItem Label="Tumor">
                                            <dxe:ComboBoxEdit x:Name="OnktEdit" Validate="dxEdit_Validate" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID_T" EditValue="{Binding DataContext.ONK_T, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}"/>
                                        </dxlc:LayoutItem>
                                    </dxlc:LayoutGroup>
                                    <dxlc:LayoutGroup>
                                        <dxlc:LayoutItem Label="Nodus">
                                            <dxe:ComboBoxEdit x:Name="OnknEdit" Validate="dxEdit_Validate" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID_N" EditValue="{Binding DataContext.ONK_N, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}"/>
                                        </dxlc:LayoutItem>
                                        <dxlc:LayoutItem Label="Metastasis">
                                            <dxe:ComboBoxEdit x:Name="OnkmEdit" Validate="dxEdit_Validate" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID_M" EditValue="{Binding DataContext.ONK_M, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}"/>
                                        </dxlc:LayoutItem>
                                    </dxlc:LayoutGroup>
                                    <dxlc:LayoutGroup>
                                        <dxlc:LayoutItem Label="Метастазы" ToolTip="Признак выявления отдалённых метастазов">
                                            <dxe:ComboBoxEdit x:Name="MtstzEdit" Validate="dxEdit_Validate" ItemsSource="{Binding}" DisplayMember="NameWithID" ValueMember="ID" EditValue="{Binding DataContext.MTSTZ, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}"/>
                                        </dxlc:LayoutItem>
                                        <dxlc:LayoutItem Label="СОД" ToolTip="Суммарная очаговая доза">
                                            <dxe:SpinEdit EditValue="{Binding DataContext.SOD, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}" />
                                        </dxlc:LayoutItem>
                                    </dxlc:LayoutGroup>
                                    <dxlc:LayoutGroup>
                                        <dxlc:LayoutItem Label="Фракции" ToolTip="Количество фракций проведения лучевой терапии">
                                            <dxe:TextEdit EditValue="{Binding DataContext.K_FR, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}" />
                                        </dxlc:LayoutItem>
                                        <dxlc:LayoutItem Label="Масса" ToolTip="Масса тела (кг)">
                                            <dxe:SpinEdit EditValue="{Binding DataContext.WEI, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}" Mask="##0.00"/>
                                        </dxlc:LayoutItem>
                                    </dxlc:LayoutGroup>
                                    <dxlc:LayoutGroup>
                                        <dxlc:LayoutItem Label="Рост" ToolTip="Рост (см)">
                                            <dxe:TextEdit EditValue="{Binding DataContext.HEI, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}" MaskType="RegEx" Mask="([1-9]{1}|[1-9]{1}[0-9]{1}|[1][0-9][0-9]|[2][0-5][0-9]|260)" MaskAutoComplete="Default"/>
                                        </dxlc:LayoutItem>
                                        <dxlc:LayoutItem Label="Площадь" ToolTip="Площадь поверхности тела (м2)">
                                            <dxe:SpinEdit EditValue="{Binding DataContext.BSA, ElementName=OnkSlGroup, UpdateSourceTrigger=PropertyChanged}" />
                                        </dxlc:LayoutItem>
                                    </dxlc:LayoutGroup>
                                </dxlc:LayoutGroup>

                            </dxlc:LayoutGroup>

                        </dxlc:LayoutGroup>

                        <dxlc:LayoutGroup View="Tabs">
                            <dxlc:LayoutGroup Header="Диагностический блок" Padding="-8">
                                <Grid >
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <dxb:BarContainerControl >
                                        <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                            <dxb:BarButtonItem x:Name="BdiagAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="BdiagAddItem_ItemClick"/>
                                            <dxb:BarButtonItem x:Name="BdiagDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="BdiagDelItem_ItemClick"/>
                                        </dxb:ToolBarControl>
                                    </dxb:BarContainerControl>

                                    <dxg:GridControl x:Name="BdiagGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                        <dxg:GridControl.View>
                                            <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" />
                                        </dxg:GridControl.View>
                                        <dxg:GridColumn x:Name="DiagDateColumn"
                                        FieldName="DIAG_DATE" Header="Дата взятия материала"/>
                                        <dxg:GridColumn FieldName="DIAG_TIP" Header="Тип диагностического показателя">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="DiagTipColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="DIAG_CODE_DT" Header="Код диагностического показателяя">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="DiagCodeColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="DIAG_RSLT_DT" Header="Код результата диагностики">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="DiagRsltColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="REC_RSLT" Header="Признак получения результата диагностики">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="RecRsltColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                    </dxg:GridControl>
                                </Grid>


                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup Header="Противопоказания и отказы" Padding="-8">
                                <Grid >
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <dxb:BarContainerControl >
                                        <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                            <dxb:BarButtonItem x:Name="BprotAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="BprotAddItem_ItemClick"/>
                                            <dxb:BarButtonItem x:Name="BprotDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="BprotDelItem_ItemClick"/>
                                        </dxb:ToolBarControl>
                                    </dxb:BarContainerControl>

                                    <dxg:GridControl x:Name="BprotGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                        <dxg:GridControl.View>
                                            <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" />
                                        </dxg:GridControl.View>
                                        <dxg:GridColumn FieldName="PROT" Header="Код противопоказания или отказа">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="ProtColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID_PrOt" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="D_PROT" Header="Дата регистрации противопоказания или отказа">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:DateEditSettings NullValueButtonPlacement="EditBox"/>
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                    </dxg:GridControl>
                                </Grid>

                            </dxlc:LayoutGroup>
                            <dxlc:LayoutGroup Header="Сведения об услуге при лечении онкологического заболевания" Padding="-8">
                                <Grid >
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <dxb:BarContainerControl >
                                        <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                            <dxb:BarButtonItem x:Name="OnkUslAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="OnkUslAddItem_ItemClick"/>
                                            <dxb:BarButtonItem x:Name="OnkUslDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="OnkUslDelItem_ItemClick"/>
                                        </dxb:ToolBarControl>
                                    </dxb:BarContainerControl>

                                    <dxg:GridControl x:Name="OnkUslGridControl" SelectedItemChanged="OnkUslGridControl_SelectedItemChanged"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                        <dxg:GridControl.View>
                                            <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" />
                                        </dxg:GridControl.View>
                                        <dxg:GridColumn FieldName="USL_TIP" Header="Тип услуги">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="UslTipColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID_TLech" />
                                            </dxg:GridColumn.EditSettings>

                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="HIR_TIP" Header="Тип хирургического лечения">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="HirTipColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID_THir" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="LEK_TIP_L" Header="Линия лекарственной терапии">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="LekTiplColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID_TLek_L" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="LEK_TIP_V" Header="Цикл лекарственной терапии">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="LekTipvColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID_TLek_V" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                        <dxg:GridColumn FieldName="LUCH_TIP" Header="Тип лучевой терапии">
                                            <dxg:GridColumn.EditSettings>
                                                <dxe:ComboBoxEditSettings x:Name="LuchTipColumnEdit"
                                                                AutoComplete="True"
                                                                DisplayMember="NameWithID"
                                                                FilterCondition="Contains"
                                                                ImmediatePopup="True"
                                                                IncrementalFiltering="True"
                                                                ItemsSource="{Binding}"
                                                                NullValueButtonPlacement="EditBox"
                                                                ValueMember="ID_TLuch" />
                                            </dxg:GridColumn.EditSettings>
                                        </dxg:GridColumn>
                                    </dxg:GridControl>
                                </Grid>

                                <dxlc:LayoutGroup View="Tabs" Padding="-8">
                                    <dxlc:LayoutGroup Header="Сведения о введенном противоопухолевом лекарственном препарате" View="Group">
                                        <Grid >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <dxb:BarContainerControl >
                                                <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                                    <dxb:BarButtonItem x:Name="LekprAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                             ItemClick="LekprAddItem_ItemClick"/>
                                                    <dxb:BarButtonItem x:Name="LekprDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="LekprDelItem_ItemClick"/>
                                                </dxb:ToolBarControl>
                                            </dxb:BarContainerControl>

                                            <dxg:GridControl x:Name="LekprGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                                <dxg:GridControl.View>
                                                    <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" />
                                                </dxg:GridControl.View>
                                                <dxg:GridColumn FieldName="REGNUM" Header="Регистрационный номер лекарственного препарата">
                                                    <dxg:GridColumn.EditSettings>
                                                        <dxe:ComboBoxEditSettings x:Name="RegNumColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID_LEKP" />
                                                    </dxg:GridColumn.EditSettings>
                                                </dxg:GridColumn>
                                                <dxg:GridColumn FieldName="CODE_SH" Header="Код схемы лекарственной терапии">
                                                    <dxg:GridColumn.EditSettings>
                                                        <dxe:ComboBoxEditSettings x:Name="CodeShColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="IDDKK" />
                                                    </dxg:GridColumn.EditSettings>
                                                </dxg:GridColumn>

                                                <dxg:GridColumn FieldName="DATE_INJ" Header="Дата введения лекарственного препарата">
                                                    <dxg:GridColumn.EditSettings>
                                                        <dxe:DateEditSettings NullValueButtonPlacement="EditBox"/>
                                                    </dxg:GridColumn.EditSettings>
                                                </dxg:GridColumn>
                                            </dxg:GridControl>
                                        </Grid>

                                    </dxlc:LayoutGroup>

                                </dxlc:LayoutGroup>
                            </dxlc:LayoutGroup>
                        </dxlc:LayoutGroup>

                    </dxlc:LayoutGroup>
                    <dxlc:LayoutGroup Header="Консилиум (ОНКО)">
                        <Grid >
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <dxb:BarContainerControl >
                                <dxb:ToolBarControl
                                        AllowCustomizationMenu="False"
                                        AllowHide="False"
                                        AllowQuickCustomization="False"
                                        IsCollapsed="False"
                                        IsTabStop="False"
                                        ShowDragWidget="False"
                                        UseWholeRow="True">
                                    <dxb:BarButtonItem x:Name="ConsAddItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Добавить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/plus_orange.png"
                                            ItemClick="ConsAddItem_ItemClick" />
                                    <dxb:BarButtonItem x:Name="ConsDelItem"
                                            BarItemDisplayMode="ContentAndGlyph"
                                            Content="Удалить запись"
                                            Glyph="pack://application:,,,/Yamed.Icons;component/Icons/deletered.png"
                                             ItemClick="ConsDelItem_ItemClick"/>
                                </dxb:ToolBarControl>
                            </dxb:BarContainerControl>

                            <dxg:GridControl x:Name="ConsGridControl"
                                    Grid.Row="1"
                                    AutoGenerateColumns="None"
                                    EnableSmartColumnsGeneration="True"
                                    ItemsSource="{Binding}">
                                <dxg:GridControl.View>
                                    <dxg:TableView AllowPerPixelScrolling="True"
                                            AutoWidth="True"
                                            ShowGroupPanel="False"
                                            ShowTotalSummary="False" ShowFilterPanelMode="Never" />
                                </dxg:GridControl.View>
                                <dxg:GridColumn x:Name="PrConsColumn"
                                        FieldName="PR_CONS"
                                        Header="Цель проведения консилиума " SortOrder="Ascending" SortIndex="0">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:ComboBoxEditSettings x:Name="PrConsColumnEdit"
                                                AutoComplete="True"
                                                DisplayMember="NameWithID"
                                                FilterCondition="Contains"
                                                ImmediatePopup="True"
                                                IncrementalFiltering="True"
                                                ItemsSource="{Binding}"
                                                NullValueButtonPlacement="EditBox"
                                                ValueMember="ID_CONS" >
                                        </dxe:ComboBoxEditSettings>
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                                <dxg:GridColumn FieldName="DT_CONS" Header="Дата проведения консилиума">
                                    <dxg:GridColumn.EditSettings>
                                        <dxe:DateEditSettings NullValueButtonPlacement="EditBox"/>
                                    </dxg:GridColumn.EditSettings>
                                </dxg:GridColumn>
                            </dxg:GridControl>
                        </Grid>


                    </dxlc:LayoutGroup>
                </dxlc:LayoutGroup>

            </dxlc:LayoutControl>
            <!--<dxe:CheckEdit Name="CheckBox1" Grid.Row="1" ></dxe:CheckEdit>-->

        </Grid>
        <!--<dxlc:LayoutControl Orientation="Vertical" View="GroupBox">
            <dxlc:LayoutGroup Header="LayoutGroup" View="Group">
                <dxlc:LayoutItem IsRequired="True" Label="Условия оказания помощи"></dxlc:LayoutItem>
            </dxlc:LayoutGroup>
        </dxlc:LayoutControl>-->

    </Grid>
</UserControl>
